<%- include("_header") -%>
<br>
<h1>Customer Export</h1>
<h4>Total Customers: <%= totRecs %></h4>
<br>
<p>Enter a file name and click "Export Customers"</p>
<form action="/export" method="post">
  <label for="filename">File Name</label>
  <input type="text" id="filename" name="filename" placeholder="export.csv" required>
  <p></p>
  <button type="submit" class="btn btn-primary">Export Customers</button>
</form>

<% if (message.substring(0, 5) === "Error") { %>
  <h2>Error!</h2>
  <p><%= message %></p>
<% } %>
<br>
  <!-- Light and Dark Mode Functionality (For Fun) -->
  <script>
    const themeToggle = document.getElementById('theme-toggle');
    const body = document.body;

    if (localStorage.getItem('theme') === 'dark') {
      body.classList.add('dark-mode');
      themeToggle.textContent = '☀️ Light Mode';
    }

    themeToggle.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      const isDarkMode = body.classList.contains('dark-mode');
      themeToggle.textContent = isDarkMode ? '☀️ Light Mode' : '🌙 Dark Mode';
      localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
    });
  </script>

<%- include("_footer") -%>
